<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 7</title>
    <link rel="stylesheet" href="../styles/week.css">
</head>

<header>
    <ul id='navigation'>
        <li id='menu'><a href="#">&#9776; Menu </a></li>
        <li><a href="../index.html">Home</a></li>
        <li><a href="../week1">Week 1</a></li>
        <li><a href="../week2">Week 2</a></li>
        <li><a href="../week3">Week 3</a></li>
        <li><a href="../week4">Week 4</a></li>
        <li><a href="../week5">Week 5</a></li>
        <li><a href="../week6">Week 6</a></li>
        <li><a href="#">Week 7</a></li>
        <li><a href="../week8">Week 8</a></li>
        <li><a href="../week9">Week 9</a></li>
        <li><a href="../week10">Week 10</a></li>
    </ul>
</header>

<body>
    </object>
    <main>
        <h2>Week 7 Notes:</h2>
        <div class='notes'>
            <h3>Chaining Multiple Promises</h3>
            <p>Promises come into their own when multiple asynchronous tasks are required to be carried out one after the other. If each function that performs an asynchronous operation returns a promise, we can chain the then() methods together to form a sequential piece of code that’s easy to read. Each promise will only begin once the previous promise has been settled.

                For example, the player logging in to a game that produced the callback hell earlier, could be written in a much nicer way by using promises:</p>
            <code>
                login(userName) <br>
                .then(user => getPlayerInfo(user.id)) <br>
                .then(info => loadGame(info)) <br>
                .catch( throw error)</code> <br>
            <p>A number of new additions to the language return promises, and you’ll see more examples of them used later in the book.</p>
            <br>
            <h3>Examples I don't understand</h3>
            <h4>A Practical Example</h4>
            <p>A closure is formed when a function returns another function that then maintains access to any variables
                created in the original function’s scope. In the following example, two variables, a and b , are created
                in the scope of the closure() function. This then returns an anonymous arrow function that maintains
                access to the variables a and b even after the closure() function has been invoked:</p>

            <code>function closure() {<br>
                const a = 1.8; <br>
                const b = 32; <br>
                return c => c * a + b; <br>
                } <br>
            </code>
            Now we can create a new function by invoking the closure() function and assigning the return value to a
            variable called toFahrenheit : <br>

            <code>const toFahrenheit = closure();</code> <br>
            <p> This new function can then be invoked with its own argument, but the values of a and b from the original
                function are still kept 'alive':</p>

            <code>toFahrenheit(30);</code>
            <p><b>Result: </b>86</p>


            <h3>Fetch</h3>
            <h2>Basic Usage</h2> 
            <p>The Fetch API provides a global fetch() method that only has one mandatory argument, which is the URL of the resource you wish to fetch. A very basic example would look something like the following piece of code:
            </p>
            <code>fetch('https://example.com/data') <br>
                .then( // code that handles the response ) <br>
                .catch( // code that runs if the server returns an error ) <br></code>
                <br>
                <p>As you can see, the fetch() method returns a promise that resolves to the response returned from the URL that was provided as an argument. In the example above, the promise will be resolved when a response is received from the URL 'https:example.com/data'. Because it’s a promise, we can also use a catch statement at the end to deal with any errors that may occur.
                </p>

            <h3>JQUERY</h3>
                <p>            The jQuery library is a good option for this – it has the generic ajax() method that can be used in a very similar way to the fetch() method. For example, if you want to get the data from the number API, you would use the following code:
                </p>
                <code>$.ajax('http://numbersapi.com/random')
                    .done(text => outputDiv.innerHTML = text );</code>
        </div>


        <h2>Week 7 code examples:</h2>
        <div class='notes'>
            <h3>Hike Event Listener from Team Activity</h3>
            <code>
                function hike1EventListener() { <br>
                    console.log("Get comments for hike 1"); <br>
                    document.getElementById('commentList').innerHTML = ''; <br>
                    commentArray = JSON.parse(localStorage.AllComments); <br>
                    commentArray.forEach(comment => { <br>
                      if (comment.hikeId == '1') { <br>
                        displayHikeComments(comment); <br>
                      } <br>
                    }); <br>
                     document.getElementById('commentSection').innerHTML = ''; <br>
                  } <br>
            </code>
        </div>

        <h2>Week 7 team activity:</h2>
        <div class='teamActivity'>
            <a href="./ta07/hiking-complete.html"><button>Week 7 Team Assignment</button></a>
        </div>

        <div class='meSection'>
            <img class='meImage' src="../images/me.png" alt="Me">
        </div>
    </main>
    <footer>
        &copy Jordan Dickson 2020
    </footer>


    <script src="../scripts/index.js"></script>
</body>

</html>